# 🦋 Hand Butterfly — 基于手势识别的交互式小游戏
> 基于 Processing + OpenCV 实现的手势控制小游戏。通过摄像头识别玩家的手势，控制屏幕中的蝴蝶躲避障碍物，体验自然交互的乐趣。

---

## 🎮 项目简介

《Hand Butterfly》是一款基于 **Processing** 平台与 **计算机视觉（OpenCV）** 的手势交互小游戏。  
蝴蝶形象的设计灵感来源于网络小说《蛊真人》中的蝴蝶型蛊虫——**定仙游**：  
> 它以轻盈优雅的姿态穿越天地间，象征着自由与灵动。  
我将这一形象与自然交互理念相结合，构建出一只可由玩家“手势”召唤与操控的虚拟蝴蝶，让其在屏幕中随手而舞、躲避障碍、自由飞翔。

玩家通过摄像头捕捉到的手势（张手/握拳）来控制蝴蝶飞行与隐身，体验独特的互动式玩法。

---

## 🧩 游戏特性

- 🎥 **实时手势识别**：通过 OpenCV 捕捉并识别手部动作（张开 / 握拳）
- 🦋 **自然动画表现**：基于三角函数控制的翅膀拍动与粒子拖尾特效
- 💥 **粒子爆炸特效**：蝴蝶碰撞或消失时产生炫丽的发光粒子效果
- ⚙️ **高性能优化**：对象池管理系统减少内存占用与性能波动
- 🧠 **MVC 架构设计**：模块化结构清晰、易于扩展与维护
- 🔊 **多媒体反馈**：音效系统增强游戏沉浸感（碰撞 / 消失 / 重启）

---

## 🕹️ 游戏玩法

### 1️⃣ 启动游戏
- 打开 **Processing IDE**
- 运行项目主文件 `MainSketch.pde`
- 确保摄像头权限已开启

### 2️⃣ 准备阶段
- 将手放入识别区域
- 张开手掌召唤蝴蝶，游戏开始！
<img width="942" height="745" alt="01：准备阶段" src="https://github.com/user-attachments/assets/6169e36a-da56-4614-a811-650004436050" />


### 3️⃣ 游玩阶段
- **张开手掌** 🖐️：蝴蝶出现并随手移动  
- **握拳** ✊：蝴蝶暂时消失以避开障碍物  
- 每生存 1 秒自动加 1 分  
- 若与障碍物碰撞 → 游戏结束
<img width="945" height="686" alt="02：游玩阶段：张手出现" src="https://github.com/user-attachments/assets/1b06ed23-e766-4090-8e5d-7423076a9249" />
<img width="469" height="344" alt="image" src="https://github.com/user-attachments/assets/2665aa22-5ffd-4018-b58d-8518dcf5261f" />



### 4️⃣ 结算阶段
- 显示最终得分与“Restart”按钮  
- 点击按钮即可重新开始
<img width="939" height="689" alt="04：结束阶段" src="https://github.com/user-attachments/assets/3befdf7a-820d-42bb-a188-52d2ef11ca1e" />

---

## 🧱 程序架构

| 模块名 | 功能描述 |
|--------|-----------|
| **MainSketch** | 管理游戏流程与状态（准备/游玩/结束） |
| **Butterfly** | 控制蝴蝶动画、颜色渐变与运动逻辑 |
| **HandTracker** | 手势识别模块（OpenCV 实现张手/握拳检测） |
| **Pipe** | 障碍物生成与移动逻辑，对象池优化 |
| **ParticleSystem** | 拖尾与爆炸粒子特效系统 |
| **Wing** | 翅膀动画模块（左右对称拍动） |
| **Button** | 结算界面按钮组件 |
| **SoundManager** | 音效播放与事件绑定管理 |

---

## 🔧 技术细节

- **语言**：Processing (Java-based)
- **依赖库**：
  - `processing.video.*`
  - `gab.opencv.*`
  - `java.awt.*`
- **视觉算法**：
  - HSV 肤色检测  
  - 手势面积比例判定  
  - 轮廓识别与指数平滑处理
- **性能优化**：
  - 对象池机制
  - 混合碰撞检测（圆形 + 像素级）
  - 状态机控制避免资源泄漏与僵尸对象

---

## 🔊 音效资源

| 文件名 | 功能 |
|--------|------|
| `pengzhuang.mp3` | 蝴蝶与障碍物碰撞时播放 |
| `xiaoshi.wav` | 握拳使蝴蝶消失时播放 |
| `restart.mp3` | 点击重新开始按钮时播放 |

---

## 💡 常见问题

**Q:** 摄像头无法识别手部？  
**A:** 请确认 Processing 拥有摄像头权限，并在光线充足的环境下运行。可调整 HSV 参数以适配肤色。

**Q:** 游戏卡顿或崩溃？  
**A:** 粒子系统数量过多会导致性能下降，请检查 `ParticleSystem` 上限设置。

**Q:** 手势识别不稳定？  
**A:** 可通过修改识别阈值或平滑参数改善识别准确度。

---

## 🚀 未来改进方向

- ✋ 增加更多手势控制方式（如挥动控制速度）  
- 🎨 丰富视觉特效与关卡系统  
- 👥 添加双人或协作模式  
- 🔧 优化 OpenCV 识别的稳定性与环境适配

---

## 📜 致谢

感谢 Processing 与 OpenCV 提供的开源工具支持。  
该项目作为《Processing 编程实践》课程结课作业完成，旨在探索自然人机交互在游戏中的应用。

---

## 🧠 License

本项目仅用于学习与研究目的。  
如需引用或改进，请注明出处与原作者信息。

---

> “当手势成为画笔，蝴蝶便在屏幕上起舞。”
